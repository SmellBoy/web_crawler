<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="MATLAB R2016a"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><title>家长帮社区上海站网络爬虫</title><style type="text/css">
* {margin: 0; padding: 0;}
body {text-align: start; line-height: 17.2339992523193px; min-height: 0px; white-space: normal; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Menlo, monospace; font-style: normal; font-size: 14px; font-weight: normal; text-decoration: none; white-space: normal; }
h1, h2 {font-weight: normal;}
.content { padding: 30px; }

.S0 { margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S1 { line-height: 26.3999996185303px; min-height: 24px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-size: 22px; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 15px; margin-right: 10px;  }
.S2 { min-height: 0px; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S3 { line-height: 20.576000213623px; min-height: 20px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: bold; white-space: pre-wrap; margin-left: 4px; margin-top: 15px; margin-bottom: 9px; margin-right: 10px;  }
.S4 { line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 2px; margin-bottom: 9px; margin-right: 10px;  }
.S5 { margin-left: 3px; margin-top: 10px; margin-bottom: 4px; margin-right: 3px;  }
.S6 { line-height: 15.5926666259766px; min-height: 18px; white-space: nowrap; font-size: 12.6666669845581px; white-space: nowrap; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S7 { line-height: 15.5926675796509px; min-height: 0px; white-space: pre; color: rgb(34, 139, 34); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S8 { line-height: 15.5926675796509px; min-height: 0px; white-space: pre; font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S9 { line-height: 15.5926675796509px; min-height: 0px; white-space: pre; font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S10 { line-height: 15.5926675796509px; min-height: 0px; white-space: pre; color: rgb(160, 32, 240); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S11 { line-height: 15.5926675796509px; min-height: 0px; white-space: pre; color: rgb(160, 32, 240); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S12 { line-height: 15.5926675796509px; min-height: 0px; white-space: pre; color: rgb(0, 0, 255); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S13 { line-height: 15.5926675796509px; min-height: 0px; white-space: pre; color: rgb(0, 0, 255); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S14 { margin-left: 3px; margin-top: 4px; margin-bottom: 4px; margin-right: 3px;  }
.S15 { margin-left: 3px; margin-top: 10px; margin-bottom: 10px; margin-right: 3px;  }
.S16 { line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 10px; margin-bottom: 9px; margin-right: 10px;  }
.S17 { color: rgb(64, 64, 64); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S18 { margin-left: 3px; margin-top: 4px; margin-bottom: 10px; margin-right: 3px;  }
.S19 { min-height: 0px; color: rgb(0, 95, 206); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }

.LineNodeBlock {margin: 10px 0 10px 0;}
.LineNodeBlock+.paragraphNode {margin-top: 10px;}
.lineNode {padding-left: 10px; background-color: #F7F7F7; border-left: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.inlineWrapper:first-child .lineNode,.inlineWrapper.outputs+.inlineWrapper .lineNode {padding-top: 5px; border-top: 1px solid #E9E9E9;}
.inlineWrapper:last-child .lineNode,.inlineWrapper.outputs .lineNode {padding-bottom: 5px; border-bottom: 1px solid #E9E9E9;}
.lineNode .textBox {white-space: pre;}
.outputGroup {margin: 2px 0 2px 0; padding: 2px 2px 2px 4px;}
.outputRegion {}
.outputParagraph {color: rgba(64, 64, 64, 1); padding: 10px 0 6px 17px; background: white; overflow-x: hidden;}
.inlineWrapper:last-child .outputParagraph {border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;}
.outputParagraph:empty {margin: 0;}
.inlineElement .symbolicElement {}
.embeddedOutputsSymbolicElement .MathEquation {margin-top: 5px; margin-bottom: 5px;}
.embeddedOutputsSymbolicElement .MathEquation.displaySymbolicElement {margin-left: 15px;}
.embeddedOutputsSymbolicElement .MathEquation.inlineSymbolicElement {margin-left: 5px;}
.embeddedOutputsSymbolicElement {overflow-x: auto; overflow-y: hidden;}
.embeddedOutputsSymbolicElement { overflow: initial !important;}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px; white-space: pre; word-wrap: initial; min-height: 18px; max-height: 250px; overflow: auto;}
.textElement {padding-top: 3px;}
.embeddedOutputsTextElement.inlineElement {}
.inlineElement .textElement {}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement { max-height: none !important; overflow: initial !important;}
.veSpecifier {}
.veContainer {}
.veSpecifierBox {height: 400px; width: 500px;}
.veSpecifier .veTable {padding-top: 3px; padding-bottom: 4px;}
.veSpecifierBox .veSpecifier .veContainer {position: relative; width: 100%; height: 370px;}
.veSpecifierBox .dijitDialogPaneContent {width: 97% !important; height: 88% !important;}
.veSpecifier .veTable .rowHeadersWrapper {padding-bottom: 0;}
.veSpecifier .veTable .scroller .variableEditorRenderers {padding-right: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;}
.veVariableValueSummary {display: inline-block;}
.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {visibility: hidden; z-index: 0;}
.veMetaSummary {font-style: italic;}
.veSpecifier .veTable .scroller {overflow: hidden;}
.veSpecifier .veTable:hover .scroller {overflow: auto;}
.veSpecifier .veVariableName,.veSpecifier .veDimensionFont {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.veSpecifier .veVariableName {padding-top: 3px;}
.veSpecifier .veDimensionFont {font-style: italic; color: #9A9A9A;}
.veSpecifier .scroller::-webkit-scrollbar-track {background-color: white;}
.veSpecifier .scroller::-webkit-scrollbar-corner {background-color: white;}
.veSpecifier .veTable .topRowHeaderWrapper {border: none; background-color: #F8F9FA;}
.veSpecifier .mw_type_ListBase.showCellBorders,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper,.veSpecifier .veTable .verticalScrollSpacer,.veSpecifier .veTable .horizontalScrollSpacer {border: none;}
.veSpecifier .veTable .dataScrollerNode {border: 1px solid #BFBFBF;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode,.veSpecifier .veTable .dataBody {font-family: Arial; font-size: 13px;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode {color: #7F7F7F;}
.veSpecifier .veTable .dataBody {color: #000000;}
.veSpecifier .veTable .columnHeaderNode .cell .drag,.veSpecifier .veTable .columnHeaderNode .cell .header,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {background-color: #F8F9FA;}
.veSpecifier .veTable .columnHeaderNode .cell .dragBorder {border-right: 1px solid #F8F9FA;}
.veSpecifier .veTable .rowHeaderNode .cell {padding-top: 3px; text-align: center; border-bottom: 1px solid #F8F9FA;}
.veSpecifier .veTable .dataBody .cell .plainText {text-align: right;}
.veSpecifier .veTable .dataBody .row .cell {border-bottom: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.embeddedOutputsVariableElement {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; min-height: 18px; max-height: 250px; overflow: auto;}
.variableElement {}
.embeddedOutputsVariableElement.inlineElement {}
.inlineElement .variableElement {}
.variableValue { width: 100% !important; }
.embeddedOutputsMatrixElement {min-height: 18px; box-sizing: border-box; font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.matrixElement .variableValue {white-space: pre; display: inline-block; vertical-align: top; overflow: hidden;}
.embeddedOutputsMatrixElement.inlineElement {}
.embeddedOutputsMatrixElement.inlineElement .topHeaderWrapper {display: none;}
.embeddedOutputsMatrixElement.inlineElement .veTable .body {padding-top: 0 !important; max-height: 100px;}
.embeddedOutputsMatrixElement.inlineElement .veVariableName {padding-top: 0;}
.inlineElement .matrixElement {max-height: 300px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer {white-space: nowrap; padding-top: 10px; margin-bottom: 3px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis.hide,.embeddedOutputsMatrixElement .matrixElement .verticalEllipsis.hide {display: none;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis {margin-bottom: -3px;}
.matrixElement { max-height: none !important; }
.dijitTooltipDialog .dijitTooltipContainer .dijitTooltipContents .alertPlugin-alertMessage {min-width: 12px; max-width: 400px; max-height: 300px; overflow: auto;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar {width: 11px; height: 11px;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-track {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-corner {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {border-radius: 7px; background-color: rgba(0, 0, 0, 0.1); border: 2px solid rgba(0, 0, 0, 0); background-clip: padding-box;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0.1);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.alertPlugin-alertLine {position: absolute; display: initial; width: 40px; text-align: right; cursor: text;}
.alertPlugin-onTextLine {visibility: hidden;}
.alertPlugin-hasTooltip .alertPlugin-warningImg,.alertPlugin-hasTooltip .alertPlugin-errorImg {cursor: pointer;}
.alertPlugin-isStale {-webkit-filter: opacity(0.4) grayscale(80%); filter: opacity(0.4) grayscale(80%);}
.alertPlugin-alertLine .alertPlugin-errorElement {display: inline-block; margin-right: 4px;}
.alertPlugin-errorImg {position: relative; display: inline-block; background-color: rgb(204, 55, 41); width: 14px; height: 14px; margin-top: 1px; -webkit-border-radius: 7px;}
.alertPlugin-alertLine .alertPlugin-warningElement {display: inline-block; margin-right: 3px;}
.alertPlugin-warningImg {position: relative; display: inline-block; width: 16px; height: 15px; overflow: hidden;}
.diagnosticMessage-wrapper {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.diagnosticMessage-wrapper.diagnosticMessage-warningType {color: rgb(255,100,0);}
.diagnosticMessage-wrapper.diagnosticMessage-warningType a {color: rgb(255,100,0); text-decoration: underline;}
.diagnosticMessage-wrapper.diagnosticMessage-errorType {color: rgb(230,0,0);}
.diagnosticMessage-wrapper.diagnosticMessage-errorType a {color: rgb(230,0,0); text-decoration: underline;}
.diagnosticMessage-wrapper .diagnosticMessage-messagePart {white-space: pre-wrap;}
.diagnosticMessage-wrapper .diagnosticMessage-stackPart {white-space: pre;}
.embeddedOutputsWarningElement{min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsWarningElement.inlineElement {}
.embeddedOutputsErrorElement {min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsErrorElement.inlineElement {}
.alertPlugin-warningImg {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wgUDS0rRPm/rwAAAAd0RVh0QXV0aG9yAKmuzEgAAAAMdEVYdERlc2NyaXB0aW9uABMJISMAAAAKdEVYdENvcHlyaWdodACsD8w6AAAADnRFWHRDcmVhdGlvbiB0aW1lADX3DwkAAAAJdEVYdFNvZnR3YXJlAF1w/zoAAAALdEVYdERpc2NsYWltZXIAt8C0jwAAAAh0RVh0V2FybmluZwDAG+aHAAAAB3RFWHRTb3VyY2UA9f+D6wAAAAh0RVh0Q29tbWVudAD2zJa/AAAABnRFWHRUaXRsZQCo7tInAAAA80lEQVQokY2SPQrCQBCF3yaChUXS2eoNbOwschSPojfQG8QT6BEExcbKEyiCgYiSWFhIIs9iXONm488Hw+7OzOPNsguSsOI0JVe+xGnKqh5FEgZ5SqzbwD2Vs+sD3S1Q89V7m4My0agQAbKPRlabOUKWyHgL8MUCkssSY2TTsez2xbUQ5ilxGNsizWEsPZZwP6h2e3fdD0uOeUrEk88iTRy+XEWo78ZvKhh3VcwS891+8XxXB8fQFP3jegzh4DwzC/p/9ChRxXkGB/mfI5aowQuA68auLJWd0zQ6z08eh8RlDtx2RfF+kdX1ily9BXgB0OyrB6CCtdLfhGTSAAAAAElFTkSuQmCC)}
.alertPlugin-errorImg {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wgUDSwzTo4WuAAAAAd0RVh0QXV0aG9yAKmuzEgAAAAMdEVYdERlc2NyaXB0aW9uABMJISMAAAAKdEVYdENvcHlyaWdodACsD8w6AAAADnRFWHRDcmVhdGlvbiB0aW1lADX3DwkAAAAJdEVYdFNvZnR3YXJlAF1w/zoAAAALdEVYdERpc2NsYWltZXIAt8C0jwAAAAh0RVh0V2FybmluZwDAG+aHAAAAB3RFWHRTb3VyY2UA9f+D6wAAAAh0RVh0Q29tbWVudAD2zJa/AAAABnRFWHRUaXRsZQCo7tInAAABJ0lEQVQokZWSsWqDUBSG/3stQgpKxcU6OYl0FUI3hzrVxUfo3jeQOlXyBt37CC7pZAe3ECrdQpsuTkkXsWhoQJDbpTfExEDyjeecn/9wzk8YY+C0dcWKlxg/6St+5x8AgHPTwoVzA/XWhyDJhM8SLqyzKcujAM1ygT7ESx3GwwiSPSQbYZ1N2fz+rjNoT2YAgOz6qlM3n54h2UNC27pieRT0uvSRRwHaumK0GMcH1+ujWS5QjGPQMk2OFnHKNAFd/1/vFNZfn6AnqwCAMZwNTAur97e93u41txmYFqjiuCcbKo4Lqno+RE3fa9qT2eaX24iaDtXzQQVJJkY4OtrNCEcQJJl0I/cYoPk+EDlNhxHuRI7T1hUrxjHKNAF/08C0oDguVK8b8j+a03ZrT40rwQAAAABJRU5ErkJggg==)}
</style></head><body><div class = "content"><div class = 'SectionBlock containment'><h1 class = "S1"><span class = "S2">家长帮社区上海站网络爬虫</span></h1><h2 class = "S3"><span class = "S2">家长帮社区上海站网络爬虫</span></h2><p class = "S4"><span class = "S2">贴吧主题：2017上海幼升小</span></p><p class = "S4"><span class = "S2">贴吧网址：http://jzb.com/bbs/forum-1137-1.html</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% 最新 热门 精华 推荐</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% http://jzb.com/bbs/forum.php?mod=forumdisplay&amp;fid=1137&amp;filter=heat&amp;orderby=heats</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% http://jzb.com/bbs/forum.php?mod=forumdisplay&amp;fid=1137&amp;filter=digest&amp;digest=1</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% http://jzb.com/bbs/forum.php?mod=forumdisplay&amp;fid=1137&amp;filter=lastpost&amp;orderby=lastpost&amp;digest=1</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% http://jzb.com/bbs/thread-4023585-1-1.html</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% http://jzb.com/bbs/thread-478034-1-1.html</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% http://weibo.com/u/3009312042/home?wvr=5</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">import </span><span class = "S10">javax.xml.xpath.*</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% factory = XPathFactory.newInstance;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% xpath = factory.newXPath;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% docNode = builder.parse('index.html');</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% expression = xpath.compile('plist/dict/array/dict/array');</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% coordinate_node = expression.evaluate(docNode, XPathConstants.STRING)</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">urllist = </span><span class = "S11">''</span><span class = "S8">;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S12">for </span><span class = "S8">pagenum = 1:1200</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    url = [</span><span class = "S11">'http://jzb.com/bbs/forum-1137-' </span><span class = "S9">num2str(pagenum) </span><span class = "S11">'.html'</span><span class = "S8">];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    T   = 5;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    str = urlread(url,</span><span class = "S11">'Timeout'</span><span class = "S8">,T);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S7">% 1 爬取帖子列表</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    pat = </span><span class = "S11">'(?&lt;=&lt;a href=")http://jzb\.com/bbs/thread-\d{4,7}-\d{1,3}-\d{1,2}\.html'</span><span class = "S8">;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S7">% &lt;a href="http://jzb.com/bbs/thread-805071-10-1.html"&gt;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    [o1,~] = regexp(str,pat,</span><span class = "S11">'match'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    urllist{pagenum} = o1';</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S7">% fprintf('urllist = %s\n', urllist{pagenum}{:} );</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S13">end</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">whos </span><span class = "S10">o1</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S4"><span class = "S2">爬取帖子内容</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">url = </span><span class = "S11">'http://jzb.com/bbs/thread-155678-1-1.html'</span><span class = "S8">;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">T   = 5;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">str = urlread(url,</span><span class = "S11">'Timeout'</span><span class = "S8">,T);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">%     pat = '(?&lt;=&lt;a href=")http://jzb\.com/bbs/thread-\d{4,7}-\d{1,3}-\d{1,2}\.html';</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% &lt;a href="http://jzb.com/bbs/thread-805071-10-1.html"&gt;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">%     &lt;td class="t_f" id="postmessage_34348821"&gt;怎么都是浦东的&lt;br&gt;&lt;br&gt;&lt;a href="/app" target="_blank" class="cblue"&gt;来自: iPhone客户端&lt;/a&gt;&lt;/td&gt;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% str = '&lt;td class="t_f" id="postmessage_34348821"&gt;怎么都是浦东的&lt;br&gt;&lt;br&gt;&lt;a href="/app" target="_blank" class="cblue"&gt;来自: iPhone客户端&lt;/a&gt;&lt;/td&gt;';</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% pat = '(?&lt;=postmessage_\d{7,9}"&gt;).*?(?=&lt;br)';</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% &lt;td class="t_f" id="postmessage_35171325"&gt;&lt;div class="quote"&gt;&lt;blockquote&gt;&lt;font color="#999999"&gt;pp_jessie 发表于 2014-4-19 23:43&lt;/font&gt;&lt;br&gt;&lt;font color="#999999"&gt;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% 当然不是，六师附小孩子大部分都去了进才北，对口的，这里面没体现的&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;对于中学对口这个问题，像进北会看在校成绩择优录取嘛？&lt;br&gt;&lt;br&gt;&lt;a href="/app" target="_blank" class="cblue"&gt;来自: iPhone客户端&lt;/a&gt;&lt;/td&gt;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">pat =</span><span class = "S11">'((?&lt;=postmessage_\d{7,9}"&gt;.*&lt;/blockquote&gt;&lt;/div&gt;)|(?&lt;=postmessage_\d{7,9}"&gt;)).*?(?=&lt;)'</span><span class = "S8">;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">[o1,o2] = regexp(str,pat,</span><span class = "S11">'match'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">urllist</span><span class = "S8"> = o1'</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div></div><p class = "S16"><span class = "S2"></span></p></div><p class = "S0"></p><div class = 'SectionBlock containment'><h1 class = "S1"><span class = "S2">数据存储</span></h1><h2 class = "S3"><span class = "S2">创建数据库存储表MySQL语句</span></h2><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">MySQL_create_table_post = [</span><span class = "S11">'create table if not exists post (' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">'post_id int' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',   url varchar (50)' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',   page_id int' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',   create_time varchar (50)' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">');'</span><span class = "S8">];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">MySQL_create_table_comments = [</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">'create table if not exists comments (' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">'post_id int' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',   url varchar (50)' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',   comments_page_id int' </span><span class = "S12">...</span><span class = "S7">'</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',   post_message_id int' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',   post_message varchar (255)' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',   create_time varchar (50)' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">');'</span><span class = "S8">];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">post_id</span><span class = "S8"> = 0;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">url</span><span class = "S9"> = [char(39) </span><span class = "S11">'www.' </span><span class = "S8">char(39)];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">page_id = 1;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">create_time</span><span class = "S8"> = [char(39) datestr(datetime,31) char(39)];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">MySQL_update_table_post = @(post_id, url, page_id, create_time)[</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">'insert into post (post_id, url, page_id, create_time)' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">'values(' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    num2str(post_id) </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',' </span><span class = "S9">url </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',' </span><span class = "S9">num2str(page_id) </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',' </span><span class = "S9">create_time </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">');'</span><span class = "S8">];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">post_id = 0;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">url = [char(39) </span><span class = "S11">'www.' </span><span class = "S8">char(39)];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">comments_page_id = 1;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">post_message_id = 1;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">post_message = </span><span class = "S11">''</span><span class = "S8">;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">create_time = [char(39) datestr(datetime,31) char(39)];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">MySQL_update_table_comments = @(post_id, url, comments_page_id, post_message_id, post_message, create_time)[</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">'insert into comments (post_id, url, comments_page_id, post_message_id, post_message, create_time)' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">'values(' </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    num2str(post_id) </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',' </span><span class = "S9">url </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',' </span><span class = "S9">num2str(comments_page_id) </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',' </span><span class = "S9">num2str(post_message_id) </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',' </span><span class = "S9">post_message </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">',' </span><span class = "S9">create_time </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S11">');'</span><span class = "S8">];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">MySQL_select_table_post = </span><span class = "S11">'select * from web_crawler.post;'</span><span class = "S8">;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% 手动建立odbc连接</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% windir: C:\WINDOWS\</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% %windir%\system32\odbcad32.exe</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% dos('start C:\WINDOWS\\system32\odbcad32.exe')</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">%</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">setdbprefs(</span><span class = "S11">'DataReturnFormat'</span><span class = "S9">, </span><span class = "S11">'cellarray'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">setdbprefs(</span><span class = "S11">'NullNumberRead'</span><span class = "S9">, </span><span class = "S11">'NaN'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">setdbprefs(</span><span class = "S11">'NullStringRead'</span><span class = "S9">, </span><span class = "S11">'null'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">conn = database.ODBCConnection(</span><span class = "S11">'localhost'</span><span class = "S9">, </span><span class = "S11">'root'</span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    ,native2unicode(hex2dec({</span><span class = "S11">'31' '32' '33' '34' '35' '36'</span><span class = "S8">}))' );</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">exec(conn, MySQL_create_table_post);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">exec(conn, MySQL_create_table_comments);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">exec(conn, MySQL_update_table_post(post_id, url, page_id, create_time));</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">curs = exec(conn, MySQL_select_table_post);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">durs = fetch(curs);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">close(curs);</span></p></div><div class = 'inlineWrapper outputs'><p class = "S6 lineNode"><span class = "S9">SQLdata</span><span class = "S8"> = durs.Data</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsVariableStringElement scrollableOutput" data-width="1146" style="width: 1157px;"><div class="textElement"><div>SQLdata = </div><div>&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/forum-1137-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 10:00'&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;[4767952]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4767952-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:05'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4708111]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4708111-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:05'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4516763]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4516763-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:05'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4590432]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4590432-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:05'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4510953]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4510953-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:05'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4424313]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4424313-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4472335]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4472335-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4439819]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4439819-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4613878]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4613878-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4114273]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4114273-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4514394]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4514394-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4016943]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4016943-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4526298]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4526298-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4510953]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4510953-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[3240437]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-3240437-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4752097]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4752097-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4590432]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4590432-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4632820]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4632820-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4760825]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4760825-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4724415]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4724415-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4764602]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4764602-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4708111]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4708111-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4729608]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4729608-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4497556]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4497556-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4721054]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4721054-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4696375]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4696375-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4733072]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4733072-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4733233]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4733233-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4755435]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4755435-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4733408]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4733408-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4520320]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4520320-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4520320]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4520320-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4520320]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4520320-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4520320]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4520320-2-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4520320]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4520320-3-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4520320]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4520320-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4760506]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4760506-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4760506]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4760506-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4760506]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4760506-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4760506]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4760506-2-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4760506]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4760506-3-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4760506]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4760506-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4772843]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4772843-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4772843]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4772843-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4772843]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4772843-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4772843]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4772843-2-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4772843]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4772843-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4710177]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4710177-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4710177]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4710177-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4710177]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4710177-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4710177]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4710177-2-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4710177]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4710177-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4779188]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4779188-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4779188]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4779188-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4779188]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4779188-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4779188]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4779188-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4766416]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4766416-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4766416]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4766416-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4766416]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4766416-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4766416]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4766416-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4550049]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4550049-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4550049]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4550049-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4550049]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4550049-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4550049]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4550049-2-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4550049]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4550049-3-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4550049]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4550049-7-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4550049]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4550049-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4782139]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4782139-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4782139]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4782139-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4782139]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4782139-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4782139]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4782139-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4552542]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4552542-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4552542]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4552542-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4552542]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4552542-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4552542]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4552542-2-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4552542]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4552542-3-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4552542]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4552542-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[3010309]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-3010309-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:06'<br>&nbsp;&nbsp;&nbsp;&nbsp;[3010309]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-3010309-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[3010309]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-3010309-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[3010309]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-3010309-2-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[3010309]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-3010309-3-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[3010309]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-3010309-14-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[3010309]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-3010309-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[1319906]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-1319906-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[1319906]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-1319906-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[1319906]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-1319906-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[1319906]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-1319906-2-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[1319906]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-1319906-3-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[1319906]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-1319906-28-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[1319906]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-1319906-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4613119]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4613119-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4613119]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4613119-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4613119]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4613119-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4613119]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4613119-2-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4613119]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4613119-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4490756]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4490756-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4490756]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4490756-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<br>&nbsp;&nbsp;&nbsp;&nbsp;[4490756]&nbsp;&nbsp;&nbsp;&nbsp;'http://jzb.com/bbs/thread-4490756-1-1.html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [&nbsp;&nbsp; 1]&nbsp;&nbsp;&nbsp;&nbsp;'2016-09-14 15:24:07'<div class="verticalEllipsis"></div></div></div></div></div></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment active'><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% 帖子url入库</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">urllist = </span><span class = "S11">''</span><span class = "S8">;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S12">for </span><span class = "S8">pagenum = 1:1200</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    url = [</span><span class = "S11">'http://jzb.com/bbs/forum-1137-' </span><span class = "S9">num2str(pagenum) </span><span class = "S11">'.html'</span><span class = "S8">];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    T   = 10;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    str = urlread(url,</span><span class = "S11">'Timeout'</span><span class = "S8">,T);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S7">% 1 爬取帖子列表</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    pat = </span><span class = "S11">'(?&lt;=&lt;a href=")http://jzb\.com/bbs/thread-\d{4,7}-\d{1,3}-\d{1,2}\.html'</span><span class = "S8">;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S7">% &lt;a href="http://jzb.com/bbs/thread-805071-10-1.html"&gt;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    [o1,~] = regexp(str,pat,</span><span class = "S11">'match'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    urllist{pagenum} = o1';</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S7">% fprintf('urllist = %s\n', urllist{pagenum}{:} );</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S12">for </span><span class = "S8">i = 1:length( urllist{pagenum} )</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">        </span><span class = "S13">try</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">            post_id = str2double( cell2mat( regexp(urllist{pagenum}{i},</span><span class = "S11">'\d{4,7}'</span><span class = "S9">,</span><span class = "S11">'match'</span><span class = "S8">)  ));</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">            url = [char(39) urllist{pagenum}{i} char(39)];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">            page_id = pagenum;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">            create_time = [char(39) datestr(datetime,31) char(39)];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">            exec(conn, MySQL_update_table_post(post_id, url, page_id, create_time));</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">        </span><span class = "S13">catch</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">        </span><span class = "S13">end</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S13">end</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S13">end</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% 帖子评论postmessage入库</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">MySQL_select_table_post_count = </span><span class = "S11">'select count(1) from web_crawler.post;'</span><span class = "S8">;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">MySQL_select_table_post_order = @(order) [</span><span class = "S11">'select * from web_crawler.post order by url limit ' </span><span class = "S9">num2str(order) </span><span class = "S11">',1;'</span><span class = "S8">];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">curs = exec(conn, MySQL_select_table_post_count );</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">durs = fetch(curs);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">close(curs);</span></p></div><div class = 'inlineWrapper outputs'><p class = "S6 lineNode"><span class = "S8">SQLdata = durs.Data</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsVariableStringElement" data-width="1157" style="width: 1157px;"><div class="textElement"><div>SQLdata = &nbsp;&nbsp;&nbsp;&nbsp;[164462]</div></div></div></div></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">N = SQLdata{1};</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8"></span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S12">for </span><span class = "S8">order = 1:N</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    fprintf(</span><span class = "S11">'order = %6d\n'</span><span class = "S8">, order);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">    </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S13">try</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        curs = exec(conn, MySQL_select_table_post_order(order) );</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        durs = fetch(curs);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        close(curs);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        SQLdata = durs.Data;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        T   = 10;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        url = SQLdata{2};</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">        str = urlread(url,</span><span class = "S11">'Timeout'</span><span class = "S8">,T);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">        [o1,o2] = regexp(str,</span><span class = "S11">'(?&lt;=postmessage_)\d{7,9}'</span><span class = "S9">,</span><span class = "S11">'match'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">        [p1,p2] = regexp(str,</span><span class = "S11">'(?&lt;=共\s)\d{1,4}(?=\s页)'</span><span class = "S9">,</span><span class = "S11">'match'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">        x = find(url==</span><span class = "S11">'-'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">        </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">        </span><span class = "S12">for </span><span class = "S8">P = 1:str2double(p1{1})</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">            </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">            url_s = [url(1:x(2)) num2str(P) url(x(3):end) ];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">            str   = urlread(url_s,</span><span class = "S11">'Timeout'</span><span class = "S8">,T);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">            [o1,o2] = regexp(str,</span><span class = "S11">'(?&lt;=postmessage_)\d{7,9}'</span><span class = "S9">,</span><span class = "S11">'match'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">            </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">            </span><span class = "S7">%pat ='( (?&lt;=postmessage_\d{7,9}"&gt;)|(?&lt;=postmessage_\d{7,9}"&gt;.*&lt;/blockquote&gt;&lt;/div&gt;) ).*?(?=&lt;)';</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">            </span><span class = "S7">%[o1,o2] = regexp(str,pat,'match');</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">            </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">            </span><span class = "S12">for </span><span class = "S8">n = 1:length(o2)</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                sss = str;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                dat = SQLdata;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                in1 = o1;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                in2 = o2;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                [o3,o4] = regexp( </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                    reshape(sss(in2(n):in2(n)+1000),1,1001) </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                    ,</span><span class = "S11">'table'</span><span class = "S9">,</span><span class = "S11">'match'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                </span><span class = "S12">if </span><span class = "S8">isempty(o4)</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                    o4 = 1000;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                </span><span class = "S13">end</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                urllist = sss(in2(n)+10:in2(n)+o4(1));</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                urllist(urllist==char(39))=</span><span class = "S11">'"'</span><span class = "S8">;</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                urllist = urllist(urllist&gt;</span><span class = "S11">'z'</span><span class = "S8">);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                </span><span class = "S12">if </span><span class = "S8">length(urllist)&gt;255</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                    urllist = urllist(1:255);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                </span><span class = "S13">end</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                post_id = dat{1};</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                url_str = [char(39) url_s char(39)];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                comments_page_id = in1{1};</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                post_message_id = in1{n};</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                post_message = [char(39) urllist char(39)];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                create_time = [char(39) datestr(now,31) char(39)];</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                exec(conn, MySQL_update_table_comments( </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">                    post_id, url_str, comments_page_id, </span><span class = "S13">...</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                    post_message_id, post_message, create_time) );</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                pause(0.001);</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S8">                </span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">            </span><span class = "S13">end</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">        </span><span class = "S13">end</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S13">catch</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S9">    </span><span class = "S13">end</span></p></div><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S13">end</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% 其他链接</span></p></div></div><p class = "S16"><a href = 'https://smellboy.github.io/heart_rate.html'><span class = "S0">heart_rate</span></a></p></div><p class = "S0"></p><div class = 'SectionBlock containment'><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S6 lineNode"><span class = "S7">% 分析报告日期</span></p></div><div class = 'inlineWrapper outputs'><p class = "S6 lineNode"><span class = "S9">fprintf(</span><span class = "S11">'分析报告日期 %s\n'</span><span class = "S8">, datestr(now,31));</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsTextElement" data-width="1157" style="width: 1157px;"><div class="textElement">分析报告日期 2016-09-19 18:30:28</div></div></div></div></div></div></div>
<!-- 
##### SOURCE BEGIN #####
%% 家长帮社区上海站网络爬虫
%% 家长帮社区上海站网络爬虫
% 贴吧主题：2017上海幼升小
% 
% 贴吧网址：http://jzb.com/bbs/forum-1137-1.html

% 最新 热门 精华 推荐
% http://jzb.com/bbs/forum.php?mod=forumdisplay&fid=1137&filter=heat&orderby=heats
% http://jzb.com/bbs/forum.php?mod=forumdisplay&fid=1137&filter=digest&digest=1
% http://jzb.com/bbs/forum.php?mod=forumdisplay&fid=1137&filter=lastpost&orderby=lastpost&digest=1
% http://jzb.com/bbs/thread-4023585-1-1.html
% http://jzb.com/bbs/thread-478034-1-1.html
% http://weibo.com/u/3009312042/home?wvr=5

import javax.xml.xpath.*

% factory = XPathFactory.newInstance;
% xpath = factory.newXPath;
% docNode = builder.parse('index.html');
% expression = xpath.compile('plist/dict/array/dict/array');
% coordinate_node = expression.evaluate(docNode, XPathConstants.STRING)

urllist = '';
for pagenum = 1:1200
    
    url = ['http://jzb.com/bbs/forum-1137-' num2str(pagenum) '.html'];
    T   = 5;
    str = urlread(url,'Timeout',T);
    
    % 1 爬取帖子列表
    pat = '(?<=<a href=")http://jzb\.com/bbs/thread-\d{4,7}-\d{1,3}-\d{1,2}\.html';
    % <a href="http://jzb.com/bbs/thread-805071-10-1.html">
    [o1,~] = regexp(str,pat,'match');
    urllist{pagenum} = o1';
    
    % fprintf('urllist = %s\n', urllist{pagenum}{:} );
    
end

whos o1
%% 
% 爬取帖子内容

url = 'http://jzb.com/bbs/thread-155678-1-1.html';
T   = 5;
str = urlread(url,'Timeout',T);

%     pat = '(?<=<a href=")http://jzb\.com/bbs/thread-\d{4,7}-\d{1,3}-\d{1,2}\.html';
% <a href="http://jzb.com/bbs/thread-805071-10-1.html">
%     <td class="t_f" id="postmessage_34348821">怎么都是浦东的<br><br><a href="/app" target="_blank" class="cblue">来自: iPhone客户端</a></td>

% str = '<td class="t_f" id="postmessage_34348821">怎么都是浦东的<br><br><a href="/app" target="_blank" class="cblue">来自: iPhone客户端</a></td>';
% pat = '(?<=postmessage_\d{7,9}">).*?(?=<br)';
% <td class="t_f" id="postmessage_35171325"><div class="quote"><blockquote><font color="#999999">pp_jessie 发表于 2014-4-19 23:43</font><br><font color="#999999">
% 当然不是，六师附小孩子大部分都去了进才北，对口的，这里面没体现的</font></blockquote></div>对于中学对口这个问题，像进北会看在校成绩择优录取嘛？<br><br><a href="/app" target="_blank" class="cblue">来自: iPhone客户端</a></td>
pat ='((?<=postmessage_\d{7,9}">.*</blockquote></div>)|(?<=postmessage_\d{7,9}">)).*?(?=<)';
[o1,o2] = regexp(str,pat,'match');
urllist = o1'

%% 
% 
%% 数据存储
%% 创建数据库存储表MySQL语句

MySQL_create_table_post = ['create table if not exists post (' ...
    'post_id int' ...
    ',   url varchar (50)' ...
    ',   page_id int' ...
    ',   create_time varchar (50)' ...
    ');'];

MySQL_create_table_comments = [
    'create table if not exists comments (' ...
    'post_id int' ...
    ',   url varchar (50)' ...
    ',   comments_page_id int' ...'
    ',   post_message_id int' ...
    ',   post_message varchar (255)' ...
    ',   create_time varchar (50)' ...
    ');'];

post_id = 0;
url = [char(39) 'www.' char(39)];
page_id = 1;
create_time = [char(39) datestr(datetime,31) char(39)];
MySQL_update_table_post = @(post_id, url, page_id, create_time)[
    'insert into post (post_id, url, page_id, create_time)' ...
    'values(' ...
    num2str(post_id) ...
    ',' url ...
    ',' num2str(page_id) ...
    ',' create_time ...
    ');'];

post_id = 0;
url = [char(39) 'www.' char(39)];
comments_page_id = 1;
post_message_id = 1;
post_message = '';
create_time = [char(39) datestr(datetime,31) char(39)];
MySQL_update_table_comments = @(post_id, url, comments_page_id, post_message_id, post_message, create_time)[
    'insert into comments (post_id, url, comments_page_id, post_message_id, post_message, create_time)' ...
    'values(' ...
    num2str(post_id) ...
    ',' url ...
    ',' num2str(comments_page_id) ...
    ',' num2str(post_message_id) ...
    ',' post_message ...
    ',' create_time ...
    ');'];

MySQL_select_table_post = 'select * from web_crawler.post;';

% 手动建立odbc连接
% windir: C:\WINDOWS\
% %windir%\system32\odbcad32.exe
% dos('start C:\WINDOWS\\system32\odbcad32.exe')
%
setdbprefs('DataReturnFormat', 'cellarray');
setdbprefs('NullNumberRead', 'NaN');
setdbprefs('NullStringRead', 'null');

conn = database.ODBCConnection('localhost', 'root'...
    ,native2unicode(hex2dec({'31' '32' '33' '34' '35' '36'}))' );

exec(conn, MySQL_create_table_post);
exec(conn, MySQL_create_table_comments);
exec(conn, MySQL_update_table_post(post_id, url, page_id, create_time));

curs = exec(conn, MySQL_select_table_post);

durs = fetch(curs);
close(curs);
SQLdata = durs.Data
% 帖子url入库
urllist = '';
for pagenum = 1:1200
    
    url = ['http://jzb.com/bbs/forum-1137-' num2str(pagenum) '.html'];
    T   = 10;
    str = urlread(url,'Timeout',T);
    
    % 1 爬取帖子列表
    pat = '(?<=<a href=")http://jzb\.com/bbs/thread-\d{4,7}-\d{1,3}-\d{1,2}\.html';
    % <a href="http://jzb.com/bbs/thread-805071-10-1.html">
    [o1,~] = regexp(str,pat,'match');
    urllist{pagenum} = o1';
    
    % fprintf('urllist = %s\n', urllist{pagenum}{:} );
    
    for i = 1:length( urllist{pagenum} )
        try
            post_id = str2double( cell2mat( regexp(urllist{pagenum}{i},'\d{4,7}','match')  ));
            url = [char(39) urllist{pagenum}{i} char(39)];
            page_id = pagenum;
            create_time = [char(39) datestr(datetime,31) char(39)];
            exec(conn, MySQL_update_table_post(post_id, url, page_id, create_time));
        catch
        end
    end
end
% 帖子评论postmessage入库

MySQL_select_table_post_count = 'select count(1) from web_crawler.post;';
MySQL_select_table_post_order = @(order) ['select * from web_crawler.post order by url limit ' num2str(order) ',1;'];

curs = exec(conn, MySQL_select_table_post_count );
durs = fetch(curs);
close(curs);
SQLdata = durs.Data
N = SQLdata{1};

for order = 1:N
    
    fprintf('order = %6d\n', order);
    
    try
        
        curs = exec(conn, MySQL_select_table_post_order(order) );
        
        durs = fetch(curs);
        close(curs);
        SQLdata = durs.Data;
        
        T   = 10;
        url = SQLdata{2};
        
        str = urlread(url,'Timeout',T);
        [o1,o2] = regexp(str,'(?<=postmessage_)\d{7,9}','match');
        
        [p1,p2] = regexp(str,'(?<=共\s)\d{1,4}(?=\s页)','match');
        x = find(url=='-');
        
        for P = 1:str2double(p1{1})
            
            url_s = [url(1:x(2)) num2str(P) url(x(3):end) ];
            str   = urlread(url_s,'Timeout',T);
            [o1,o2] = regexp(str,'(?<=postmessage_)\d{7,9}','match');
            
            %pat ='( (?<=postmessage_\d{7,9}">)|(?<=postmessage_\d{7,9}">.*</blockquote></div>) ).*?(?=<)';
            %[o1,o2] = regexp(str,pat,'match');
            
            for n = 1:length(o2)
                
                sss = str;
                dat = SQLdata;
                in1 = o1;
                in2 = o2;
                
                [o3,o4] = regexp( ...
                    reshape(sss(in2(n):in2(n)+1000),1,1001) ...
                    ,'table','match');
                if isempty(o4)
                    o4 = 1000;
                end
                
                urllist = sss(in2(n)+10:in2(n)+o4(1));
                urllist(urllist==char(39))='"';
                
                urllist = urllist(urllist>'z');
                
                if length(urllist)>255
                    urllist = urllist(1:255);
                end
                
                post_id = dat{1};
                url_str = [char(39) url_s char(39)];
                comments_page_id = in1{1};
                post_message_id = in1{n};
                post_message = [char(39) urllist char(39)];
                create_time = [char(39) datestr(now,31) char(39)];
                
                exec(conn, MySQL_update_table_comments( ...
                    post_id, url_str, comments_page_id, ...
                    post_message_id, post_message, create_time) );
                pause(0.001);
                
            end
        end
    catch
    end
end
% 其他链接
%% 
% <https://smellboy.github.io/heart_rate.html heart_rate>

% 分析报告日期
fprintf('分析报告日期 %s\n', datestr(now,31));
##### SOURCE END #####
--></body></html>